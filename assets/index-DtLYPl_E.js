var ne=Object.defineProperty;var te=(e,n,t)=>n in e?ne(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var J=(e,n,t)=>te(e,typeof n!="symbol"?n+"":n,t);import{a as s,j as x}from"./index-roQL5kml.js";var A="moonpay-react-sdk-embedded-frame",oe=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{currencyCode:l,defaultCurrencyCode:a,walletAddress:i,walletAddressTag:u,walletAddresses:c,walletAddressTags:m,colorCode:d,theme:g,themeId:C,language:f,baseCurrencyCode:y,baseCurrencyAmount:v,quoteCurrencyAmount:h,lockAmount:w,email:S,externalTransactionId:b,externalCustomerId:W,paymentMethod:T,redirectURL:P,showAllCurrencies:U,showOnlyCurrencies:I,showWalletAddressForm:M,unsupportedRegionRedirectUrl:k,skipUnsupportedRegionScreen:O,baseOrigin:L,onAuthToken:q,onInitiateDeposit:K,onKmsWalletsCreated:B,onLogin:p,onTransactionCompleted:D,onUnsupportedRegion:F,onSwapsCustomerSetupComplete:$,onCloseOverlay:j,onTransactionCreated:E,auth:_,useWarnBeforeRefresh:Y,overlayNode:G}=e,z={apiKey:n,signature:r,currencyCode:l,defaultCurrencyCode:a,walletAddress:i,walletAddressTag:u,walletAddresses:c,walletAddressTags:m,colorCode:d,theme:g,themeId:C,language:f,baseCurrencyCode:y,baseCurrencyAmount:v,quoteCurrencyAmount:h,lockAmount:w,email:S,externalTransactionId:b,externalCustomerId:W,paymentMethod:T,redirectURL:P,showAllCurrencies:U,showOnlyCurrencies:I,showWalletAddressForm:M,unsupportedRegionRedirectUrl:k,skipUnsupportedRegionScreen:O},H={onAuthToken:q,onInitiateDeposit:K,onKmsWalletsCreated:B,onLogin:p,onTransactionCompleted:D,onUnsupportedRegion:F,onSwapsCustomerSetupComplete:$,onCloseOverlay:j,onTransactionCreated:E};return{flow:"buy",variant:e.variant,environment:o,params:z,debug:t,baseOrigin:L,handlers:H,auth:_,useWarnBeforeRefresh:Y,containerNodeSelector:`#${A}`,overlayNode:G}},ae=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{quoteCurrencyCode:l,defaultCurrencyCode:a,defaultBaseCurrencyCode:i,walletAddress:u,walletAddressTag:c,walletAddresses:m,walletAddressTags:d,colorCode:g,theme:C,themeId:f,language:y,baseCurrencyCode:v,baseCurrencyAmount:h,quoteCurrencyAmount:w,lockAmount:S,email:b,externalTransactionId:W,externalCustomerId:T,paymentMethod:P,redirectURL:U,showAllCurrencies:I,showOnlyCurrencies:M,showWalletAddressForm:k,unsupportedRegionRedirectUrl:O,skipUnsupportedRegionScreen:L,mpWalletId:q,baseOrigin:K,refundWalletAddress:B,refundWalletAddresses:p,onAuthToken:D,onInitiateDeposit:F,onKmsWalletsCreated:$,onLogin:j,onTransactionCompleted:E,onUnsupportedRegion:_,onSwapsCustomerSetupComplete:Y,onCloseOverlay:G,onTransactionCreated:z,auth:H,useWarnBeforeRefresh:X}=e,Z={apiKey:n,signature:r,quoteCurrencyCode:l,defaultCurrencyCode:a,defaultBaseCurrencyCode:i,walletAddress:u,walletAddressTag:c,walletAddresses:m,walletAddressTags:d,colorCode:g,theme:C,themeId:f,language:y,baseCurrencyCode:v,baseCurrencyAmount:h,quoteCurrencyAmount:w,lockAmount:S,email:b,externalTransactionId:W,externalCustomerId:T,paymentMethod:P,redirectURL:U,showAllCurrencies:I,showOnlyCurrencies:M,showWalletAddressForm:k,unsupportedRegionRedirectUrl:O,skipUnsupportedRegionScreen:L,mpWalletId:q,refundWalletAddress:B,refundWalletAddresses:p},ee={onAuthToken:D,onInitiateDeposit:F,onKmsWalletsCreated:$,onLogin:j,onTransactionCompleted:E,onUnsupportedRegion:_,onSwapsCustomerSetupComplete:Y,onCloseOverlay:G,onTransactionCreated:z};return{flow:"sell",variant:e.variant,environment:o,params:Z,debug:t,baseOrigin:K,handlers:ee,auth:H,useWarnBeforeRefresh:X,containerNodeSelector:`#${A}`}},re=({props:e,apiKey:n,debug:t,environment:o})=>{const{amount:r,amountCurrencyCode:l,theme:a,themeId:i,externalCustomerId:u,baseOrigin:c,onAuthToken:m,onLogin:d,onInitiateDeposit:g,onSwapsCustomerSetupComplete:C,onCloseOverlay:f,onTransactionCreated:y,onKmsWalletsCreated:v,onTransactionCompleted:h,onUnsupportedRegion:w,auth:S,useWarnBeforeRefresh:b}=e,W={apiKey:n,amount:r,amountCurrencyCode:l,theme:a,themeId:i,externalCustomerId:u},T={onAuthToken:m,onLogin:d,onInitiateDeposit:g,onSwapsCustomerSetupComplete:C,onCloseOverlay:f,onTransactionCreated:y,onKmsWalletsCreated:v,onTransactionCompleted:h,onUnsupportedRegion:w};return{flow:"swapsCustomerSetup",variant:e.variant,environment:o,params:W,debug:t,handlers:T,baseOrigin:c,auth:S,useWarnBeforeRefresh:b,containerNodeSelector:`#${A}`}},se=({props:e,apiKey:n,debug:t,environment:o})=>{const{amount:r,amountCurrencyCode:l,theme:a,themeId:i,baseOrigin:u,onLogin:c,onInitiateDeposit:m,onConsumerKycComplete:d,onKmsWalletsCreated:g,onTransactionCompleted:C,onUnsupportedRegion:f,onCloseOverlay:y,auth:v,useWarnBeforeRefresh:h}=e,w={apiKey:n,amount:r,amountCurrencyCode:l,theme:a,themeId:i},S={onLogin:c,onInitiateDeposit:m,onConsumerKycComplete:d,onKmsWalletsCreated:g,onTransactionCompleted:C,onUnsupportedRegion:f,onCloseOverlay:y};return{flow:"consumerKyc",variant:e.variant,environment:o,params:w,debug:t,handlers:S,baseOrigin:u,auth:v,useWarnBeforeRefresh:h,containerNodeSelector:`#${A}`}},ie=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{contractAddress:l,tokenId:a,listingId:i,externalTransactionId:u,baseCurrencyCode:c,redirectURL:m,walletAddress:d,subPartnerName:g,metadata:C,dynamicAssetInfo:f,sellType:y,email:v,quantity:h,baseOrigin:w,onAuthToken:S,onLogin:b,onTransactionCompleted:W,onUnsupportedRegion:T,onInitiateDeposit:P,onKmsWalletsCreated:U,onCloseOverlay:I,onTransactionCreated:M,auth:k,useWarnBeforeRefresh:O}=e,L={apiKey:n,signature:r,contractAddress:l,tokenId:a,listingId:i,externalTransactionId:u,baseCurrencyCode:c,redirectURL:m,walletAddress:d,subPartnerName:g,metadata:C,dynamicAssetInfo:f,sellType:y,email:v,quantity:h},q={onAuthToken:S,onLogin:b,onTransactionCompleted:W,onUnsupportedRegion:T,onInitiateDeposit:P,onKmsWalletsCreated:U,onCloseOverlay:I,onTransactionCreated:M};return{flow:"nft",variant:e.variant,environment:o,params:L,debug:t,handlers:q,auth:k,baseOrigin:w,useWarnBeforeRefresh:O,containerNodeSelector:`#${A}`}},le=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{contractId:l,tokenId:a,initialScreen:i,onAuthToken:u,onLogin:c,onTransactionCompleted:m,onUnsupportedRegion:d,onInitiateDeposit:g,onKmsWalletsCreated:C,onCloseOverlay:f,onTransactionCreated:y,baseOrigin:v,auth:h,useWarnBeforeRefresh:w}=e,S={apiKey:n,signature:r,contractId:l,tokenId:a,initialScreen:i},b={onAuthToken:u,onLogin:c,onTransactionCompleted:m,onUnsupportedRegion:d,onInitiateDeposit:g,onKmsWalletsCreated:C,onCloseOverlay:f,onTransactionCreated:y};return{flow:"claim",variant:e.variant,environment:o,params:S,debug:t,handlers:b,baseOrigin:v,auth:h,useWarnBeforeRefresh:w,containerNodeSelector:`#${A}`}},ue=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{externalCustomerId:l,theme:a,themeId:i,currencyCode:u,baseOrigin:c,onAuthToken:m,onInitiateDeposit:d,onKmsWalletsCreated:g,onLogin:C,onTransactionCompleted:f,onUnsupportedRegion:y,onSwapsCustomerSetupComplete:v,onCloseOverlay:h,onTransactionCreated:w,auth:S,useWarnBeforeRefresh:b}=e,W={apiKey:n,signature:r,externalCustomerId:l,theme:a,themeId:i,currencyCode:u},T={onAuthToken:m,onInitiateDeposit:d,onKmsWalletsCreated:g,onLogin:C,onTransactionCompleted:f,onUnsupportedRegion:y,onSwapsCustomerSetupComplete:v,onCloseOverlay:h,onTransactionCreated:w};return{flow:"topup",variant:e.variant,environment:o,params:W,debug:t,handlers:T,baseOrigin:c,auth:S,useWarnBeforeRefresh:b,containerNodeSelector:`#${A}`}},de=({props:e,debug:n,environment:t})=>{const{theme:o,themeId:r,baseOrigin:l,onLogin:a,onTransactionCompleted:i,onUnsupportedRegion:u,onCloseOverlay:c,onTransactionCreated:m,onBalanceDepositTransferConfirmed:d,auth:g,useWarnBeforeRefresh:C}=e,f={theme:o,themeId:r},y={onLogin:a,onTransactionCompleted:i,onUnsupportedRegion:u,onCloseOverlay:c,onTransactionCreated:m,onBalanceDepositTransferConfirmed:d};return{flow:"moonPayBalanceDeposit",variant:e.variant,environment:t,params:f,debug:n,handlers:y,baseOrigin:l,auth:g,useWarnBeforeRefresh:C,containerNodeSelector:`#${A}`}},ce=({props:e,debug:n,environment:t})=>{const{theme:o,themeId:r,baseOrigin:l,onLogin:a,onTransactionCompleted:i,onUnsupportedRegion:u,onCloseOverlay:c,onTransactionCreated:m,auth:d,useWarnBeforeRefresh:g}=e,C={theme:o,themeId:r},f={onLogin:a,onTransactionCompleted:i,onUnsupportedRegion:u,onCloseOverlay:c,onTransactionCreated:m};return{flow:"moonPayBalanceWithdraw",variant:e.variant,environment:t,params:C,debug:n,baseOrigin:l,handlers:f,auth:d,useWarnBeforeRefresh:g,containerNodeSelector:`#${A}`}},me=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{externalCustomerId:l,theme:a,themeId:i,baseCurrencyCode:u,baseOrigin:c,onAuthToken:m,onInitiateDeposit:d,onKmsWalletsCreated:g,onLogin:C,onTransactionCompleted:f,onUnsupportedRegion:y,onSwapsCustomerSetupComplete:v,onCloseOverlay:h,onTransactionCreated:w,auth:S,useWarnBeforeRefresh:b}=e,W={apiKey:n,signature:r,externalCustomerId:l,theme:a,themeId:i,baseCurrencyCode:u},T={onAuthToken:m,onInitiateDeposit:d,onKmsWalletsCreated:g,onLogin:C,onTransactionCompleted:f,onUnsupportedRegion:y,onSwapsCustomerSetupComplete:v,onCloseOverlay:h,onTransactionCreated:w};return{flow:"withdraw",variant:e.variant,environment:o,params:W,debug:t,handlers:T,baseOrigin:c,auth:S,useWarnBeforeRefresh:b,containerNodeSelector:`#${A}`}},ge=({props:e,apiKey:n,debug:t,environment:o,signature:r})=>{const{walletAddress:l,walletAddressTag:a,refundWalletAddress:i,baseCurrencyCode:u,baseCurrencyAmount:c,quoteCurrencyCode:m,quoteCurrencyAmount:d,colorCode:g,theme:C,themeId:f,externalCustomerId:y,baseOrigin:v,onAuthToken:h,onInitiateDeposit:w,onKmsWalletsCreated:S,onLogin:b,onTransactionCompleted:W,onUnsupportedRegion:T,onSwapsCustomerSetupComplete:P,onCloseOverlay:U,onTransactionCreated:I,auth:M,useWarnBeforeRefresh:k}=e,O={apiKey:n,signature:r,walletAddress:l,walletAddressTag:a,refundWalletAddress:i,baseCurrencyCode:u,baseCurrencyAmount:c,quoteCurrencyCode:m,quoteCurrencyAmount:d,colorCode:g,theme:C,themeId:f,externalCustomerId:y},L={onAuthToken:h,onInitiateDeposit:w,onKmsWalletsCreated:S,onLogin:b,onTransactionCompleted:W,onUnsupportedRegion:T,onSwapsCustomerSetupComplete:P,onCloseOverlay:U,onTransactionCreated:I};return{flow:"swap",variant:e.variant,environment:o,params:O,debug:t,handlers:L,baseOrigin:v,auth:M,useWarnBeforeRefresh:k,containerNodeSelector:`#${A}`}},Ce=({props:e,debug:n,environment:t})=>{const{transactionId:o,colorCode:r,theme:l,themeId:a,baseOrigin:i,onAuthToken:u,onInitiateDeposit:c,onKmsWalletsCreated:m,onLogin:d,onTransactionCompleted:g,onUnsupportedRegion:C,onSwapsCustomerSetupComplete:f,onCloseOverlay:y,onTransactionCreated:v,auth:h,useWarnBeforeRefresh:w}=e,S={transactionId:o,colorCode:r,theme:l,themeId:a},b={onAuthToken:u,onInitiateDeposit:c,onKmsWalletsCreated:m,onLogin:d,onTransactionCompleted:g,onUnsupportedRegion:C,onSwapsCustomerSetupComplete:f,onCloseOverlay:y,onTransactionCreated:v};return{flow:"transactionTracker",variant:e.variant,environment:t,params:S,baseOrigin:i,debug:n,handlers:b,auth:h,containerNodeSelector:`#${A}`,useWarnBeforeRefresh:w}};async function fe(e="v1"){return new Promise((n,t)=>{const o=`https://static.moonpay.com/web-sdk/${e}/moonpay-web-sdk.min.js`,r=document.querySelector(`script[src="${o}"]`),l=(a=0)=>{if(window.MoonPayWebSdk){n(window.MoonPayWebSdk.init);return}if(a>100){t(new Error("Loading MoonPayWebSdk script timed out."));return}setTimeout(()=>l(a+1),100)};if(r)l();else{const a=document.createElement("script");a.async=!0,a.src=o,a.addEventListener("load",()=>{var i;n((i=window.MoonPayWebSdk)==null?void 0:i.init)}),a.addEventListener("error",()=>{t(new Error("Failed to load MoonPayWebSdk script."))}),document.body.appendChild(a)}})}function ye(e){return e.startsWith("pk_live")||e.startsWith("sk_live")?"production":"sandbox"}var Q=()=>{},ve={info:Q,warn:Q,error:Q},he=class V{constructor({logger:n,prefix:t}){J(this,"prefix");J(this,"logger");this.logger=n,this.prefix=t??["Logger"]}if(n){return n?this:new V({logger:ve})}info(...n){this.logger.info(`[${this.prefix}]`,...n)}warn(...n){this.logger.warn(`[${this.prefix}]`,...n)}error(...n){this.logger.error(`[${this.prefix}]`,...n)}},R=s.createContext({apiKey:"",environment:"sandbox",debug:!1}),We=({children:e,apiKey:n,debug:t=!1})=>{const o=ye(n),[r,l]=s.useState({apiKey:n,environment:o,debug:t}),a=s.useCallback(async()=>{const i=await fe();l(u=>({...u,init:i}))},[]);return s.useEffect(()=>{r.init||a()},[a,r.init]),x.jsx(R.Provider,{value:r,children:e})},we=class extends he{constructor(){super({logger:console,prefix:["MoonPay React SDK"]})}},Se=(e,n,t)=>{const o=s.useRef(null),{init:r,debug:l}=s.useContext(R),a=s.useRef(new we().if(l||!1)),i=s.useCallback(async()=>{var u,c;if(o.current){if(!t&&("walletAddress"in e||"walletAddresses"in e)&&a.current.warn("You must provide an `onUrlSignatureRequested` function to sign the URL when using the `walletAddress` or `walletAddresses` prop"),t){const m=o.current.generateUrlForSigning();try{const d=await(t==null?void 0:t(m));if(!d)return;(u=o.current)==null||u.updateSignature(d)}catch(d){a.current.error("Something went wrong calling the provided `onUrlSignatureRequested` function:",d)}}n&&((c=o.current)==null||c.show())}},[t,n,e]);s.useEffect(()=>{o.current&&o.current.close();const u=(r==null?void 0:r(e))||null;o.current=u,i()},[r,e,i])},be={width:"424px",height:"656px",margin:"32px 28px 32px 28px",border:"1px solid #E5E7EB",borderRadius:"16px",overflow:"hidden"};function N({config:e,onUrlSignatureRequested:n,visible:t=!0,className:o,style:r}){return Se(e,t,n),t?x.jsx("div",{id:A,className:o,style:e.variant==="embedded"?{...be,...r}:void 0}):null}function Te(e){const{environment:n}=s.useContext(R),t=s.useMemo(()=>de({props:e,environment:n,debug:!1}),[e,n]);return x.jsx(N,{config:t,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Ae(e){const{environment:n}=s.useContext(R),t=s.useMemo(()=>ce({props:e,environment:n,debug:!1}),[e,n]);return x.jsx(N,{config:t,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Ne(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>oe({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Pe(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>se({props:e,apiKey:n,environment:t,debug:!1,signature:""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Ue(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>ie({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Ie(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>le({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Me(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>ae({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function ke(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>re({props:e,apiKey:n,environment:t,debug:!1,signature:""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Oe(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>ge({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Le(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>ue({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function qe(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>Ce({props:e,apiKey:n,environment:t,debug:!1,signature:""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}function Ke(e){const{apiKey:n,environment:t}=s.useContext(R),o=s.useMemo(()=>me({props:e,apiKey:n,environment:t,debug:!1,signature:e.signature||""}),[e,n,t]);return x.jsx(N,{config:o,visible:e.visible,onUrlSignatureRequested:e.onUrlSignatureRequested,className:e.className,style:e.style})}export{Te as MoonPayBalanceDepositWidget,Ae as MoonPayBalanceWithdrawWidget,Ne as MoonPayBuyWidget,Pe as MoonPayConsumerKycWidget,R as MoonPayContext,Ue as MoonPayNftCheckoutWidget,Ie as MoonPayNftClaimWidget,We as MoonPayProvider,Me as MoonPaySellWidget,Oe as MoonPaySwapWidget,ke as MoonPaySwapsCustomerSetupWidget,Le as MoonPayTopUpLedgerWidget,qe as MoonPayTransactionTrackerWidget,Ke as MoonPayWithdrawLedgerWidget};
