const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DtLYPl_E.js","assets/index-roQL5kml.js","assets/index-Do4pUFDR.css"])))=>i.map(i=>d[i]);
import{a as n,_ as x,b as L,O,d as W,e as z,o as j,j as A,i as U}from"./index-roQL5kml.js";var g=function(d,a,l,i){function e(r){return r instanceof l?r:new l(function(u){u(r)})}return new(l||(l=Promise))(function(r,u){function C(o){try{f(i.next(o))}catch(w){u(w)}}function c(o){try{f(i.throw(o))}catch(w){u(w)}}function f(o){o.done?r(o.value):e(o.value).then(C,c)}f((i=i.apply(d,a||[])).next())})};const B="pk_live_EQva4LydtNDE0Rwd9X7SG9w58wqOzbux",N="pk_test_HYobzemmTBXxcSStVA4dSED6jT",q=({para:d,isDark:a,isEmbedded:l,onRampConfig:i,onRampPurchase:e,setOnRampPurchase:r})=>{const[u,C]=n.useState(null),[c,f]=n.useState(null),[o,w]=n.useState(null);n.useEffect(()=>{const t=n.lazy(()=>x(()=>import("./index-DtLYPl_E.js"),__vite__mapDeps([0,1,2])).then(y=>({default:y.MoonPayBuyWidget}))),s=n.lazy(()=>x(()=>import("./index-DtLYPl_E.js"),__vite__mapDeps([0,1,2])).then(y=>({default:y.MoonPaySellWidget}))),v=n.lazy(()=>x(()=>import("./index-DtLYPl_E.js"),__vite__mapDeps([0,1,2])).then(y=>({default:y.MoonPayProvider})));C(t),f(s),w(v)},[]);const T=e.testMode?N:B,I=n.useCallback(t=>g(void 0,void 0,void 0,function*(){if(!d.getUserId()||!e.walletType)throw new Error("missing required fields");return(yield d.ctx.client.signMoonPayUrl(d.getUserId(),{url:t,type:e.walletType,cosmosPrefix:d.cosmosPrefix,testMode:e.testMode,walletId:e.walletId||void 0,externalWalletAddress:e.externalWalletAddress||void 0})).data.signature}),[e.walletId,e.walletType,d.cosmosPrefix,e.testMode,d]),{currencyCodes:_,defaultCurrencyCode:S}=n.useMemo(()=>L(i,{provider:O.MOONPAY,walletType:e.walletType,purchaseType:e.type}),[e.walletType,e.type,i.assetInfo,i==null?void 0:i.allowedAssets]),M=n.useCallback(t=>g(void 0,void 0,void 0,function*(){try{const[s,v]=W(i.assetInfo,O.MOONPAY,t.quoteCurrency.code),y=yield d.ctx.client.updateOnRampPurchase({userId:d.getUserId(),walletId:e.walletId,purchaseId:e.id,externalWalletAddress:e.externalWalletAddress,updates:{fiatQuantity:t.baseCurrencyAmount.toString(),fiat:t.baseCurrency.code,network:s,asset:v,assetQuantity:t.quoteCurrencyAmount.toString(),status:z.FINISHED}});r(y),l||setTimeout(()=>{window.close()},5e3)}catch(s){console.error(s)}}),[e.walletId,e.id,e.externalWalletAddress,l]),b=n.useCallback(t=>g(void 0,void 0,void 0,function*(){return{depositId:yield j(d,e,r,{assetQuantity:t.cryptoCurrencyAmount,fiatQuantity:t.fiatCurrencyAmount||void 0,fiat:t.fiatCurrency.code.toUpperCase(),destinationAddress:t.depositWalletAddress,contractAddress:t.cryptoCurrency.contractAddress,chainId:t.cryptoCurrency.chainId}),cancelTransactionOnError:!1}}),[d,e.id,e.testMode,e.walletId,e.walletType,r]),E=n.useMemo(()=>{if(!u||!c)return null;const t=_.reduce((s,v)=>Object.assign(Object.assign({},s),{[v.toLowerCase()]:e.address}),{});return e.type==="BUY"?A.jsx(u,{variant:"embedded",baseCurrencyCode:e.fiat,baseCurrencyAmount:e.fiatQuantity,showOnlyCurrencies:_.join(","),defaultCurrencyCode:S,walletAddresses:JSON.stringify(t),visible:!0,theme:a?"dark":"light",style:{height:"100%",width:"100%",border:"none",borderRadius:0,margin:0},onTransactionCompleted:M,onUrlSignatureRequested:I}):A.jsx(c,{variant:"embedded",refundWalletAddresses:JSON.stringify(t),visible:!0,theme:a?"dark":"light",style:{height:"100%",width:"100%",border:"none",borderRadius:0,margin:0},showOnlyCurrencies:_.join(","),defaultCurrencyCode:_[0],onInitiateDeposit:b,onTransactionCompleted:M,onUrlSignatureRequested:I})},[e.type,e.address,e.walletId,e.walletType,S,_,b,M,I,a,u,c]);return o?A.jsx(Y,{isEmbedded:l,children:A.jsx(o,{apiKey:T,debug:e.testMode,children:E})}):null},Y=U.div`
  width: ${({isEmbedded:d})=>d?"100%":"100vw"};
  height: ${({isEmbedded:d})=>d?"640px":"100vh"};

  iframe {
    border: 0 !important;
  }
`;export{q as default};
